{"version":3,"sources":["webpack:///webpack/bootstrap 65c71deeda6606203c30","webpack:///./client/src/boot/index.js","webpack:///./client/src/boot/registerComponents.js","webpack:///./client/src/bundles/bundle.js","webpack:///./client/src/components/CreditCardField.js","webpack:///./client/src/components/descriptionTransformation.js","webpack:///./client/src/legacy/entwine/CreditCardFieldEntwine.js","webpack:///external \"Injector\"","webpack:///external \"React\"","webpack:///external \"FieldHolder\"","webpack:///external \"ReactDom\""],"names":["window","document","addEventListener","Injector","component","registerMany","CreditCardField","transform","updater","descriptionTransformation","console","log","require","props","splitValue","value","split","state","values","event","id","newState","target","setState","onChange","implodeValues","Object","join","name","map","getValue","Component","WrappedComponent","extraClass","React","jQuery","entwine","$","onmatch","cmsContent","closest","attr","context","data","ReactDOM","render","onunmatch","unmountComponentAtNode"],"mappings":"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","file":"js/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./client/src/bundles/bundle.js\");\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 65c71deeda6606203c30","/* global window */\nimport registerComponents from 'boot/registerComponents';\n\nwindow.document.addEventListener('DOMContentLoaded', () => {\n    registerComponents();\n});\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/boot/index.js","import Injector from 'lib/Injector';\nimport CreditCardField from 'components/CreditCardField';\nimport descriptionTransformation from 'components/descriptionTransformation';\n\nexport default () => {\n  Injector.component.registerMany({\n      // List your React components here so Injector is aware of them\n      CreditCardField,\n  });\n\n  Injector.transform('my-transform', (updater) => {\n    // Applies to all text fields in AssetAdmin editform that are called Description\n    updater.component('TextField.AssetAdmin.*.Description', descriptionTransformation);\n    console.log('updating');\n  });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/boot/registerComponents.js","// Include any legacy Entwine wrappers\nrequire('legacy/entwine/CreditCardFieldEntwine');\n\n// Include boot entrypoint\nrequire('boot');\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/bundles/bundle.js","import React, { Component } from 'react';\nimport fieldHolder from 'components/FieldHolder/FieldHolder';\n\nclass CreditCardField extends Component {\n  constructor(props) {\n    super(props);\n\n    // Get initial value from props\n    const splitValue = props.value.split('-');\n\n    // Initialise the state\n    this.state = {\n      values: {\n        1: splitValue[0] || '',\n        2: splitValue[1] || '',\n        3: splitValue[2] || '',\n        4: splitValue[3] || '',\n      },\n      value: '',\n    };\n  }\n\n  /**\n   * When an input value changes, assign the value of the changed input to the state\n   *\n   * @param {object} event\n   * @param {number} id\n   */\n  onChange(event, id) {\n    // Merge existing \"values\" state entries with the new one\n    const newState = {\n      values: {\n        ...this.state.values,\n        [id]: event.target.value,\n      },\n    };\n\n    this.setState(newState);\n\n    // Allow delegation to passed change handlers, e.g. for setting values to redux form state\n    // Pass the concatenated values instead of the individual form field value.\n    if (typeof this.props.onChange === 'function') {\n      this.props.onChange(event, {\n        value: this.implodeValues(),\n      });\n    }\n  }\n\n  /**\n   * Gets a specific value from the state\n   *\n   * @param {number} id\n   * @returns {string}\n   */\n  getValue(id) {\n    return this.state.values[id] || '';\n  }\n\n  /**\n   * Implode the state values into a dash delimited string\n   *\n   * @returns {string}\n   */\n  implodeValues() {\n    const values = Object.values(this.state.values);\n    const value = values.join('-');\n\n    // If nothing has been stored at all yet, don't send back \"---\"\n    if (value === '---') {\n      return '';\n    }\n    return value;\n  }\n\n  /**\n   * Update the component's state with the new value whenever an input is changed\n   *\n   * @returns {DOMElement}\n   */\n\n  render() {\n    const { name } = this.props;\n\n    return (\n      <div className=\"credit-card input-group\">\n        {\n          /* Create four separate inputs, indexed by a number */\n          [1, 2, 3, 4].map((id) => (\n            <input\n              key={id}\n              type=\"text\"\n              className=\"form-control credit-card__input\"\n              name={`${name}_${id}`}\n              maxLength={4}\n              /* Use state to store the value, ensuring it can be changed. */\n              onChange={(event) => this.onChange(event, id)}\n              value={this.getValue(id)}\n            />\n          ))\n        }\n        {/* We need a hidden input for posting the data back to SilverStripe backend */}\n        <input name={name} type=\"hidden\" value={this.implodeValues()} />\n      </div>\n    );\n  }\n}\n\nexport { CreditCardField as Component };\n\nexport default fieldHolder(CreditCardField);\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/components/CreditCardField.js","import React from 'react';\n\nconst descriptionTransformation = (WrappedComponent) => (\n  class DescriptionTransformation extends React.Component {\n    render() {\n      console.log('rendering via HOC');\n      const props = {\n        ...this.props,\n        extraClass: `${this.props.extraClass} text-field--transformed`,\n      };\n\n      return (\n        <WrappedComponent {...props} />\n      );\n    }\n  }\n);\n\nexport default descriptionTransformation;\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/components/descriptionTransformation.js","/* global window */\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { loadComponent } from 'lib/Injector';\n\nwindow.jQuery.entwine('ss', ($) => {\n  $('.js-injector-boot .credit-card-field[data-entwine]').entwine({\n    onmatch() {\n      const cmsContent = this.closest('.cms-content').attr('id');\n      const context = (cmsContent)\n        ? { context: cmsContent }\n        : {};\n      const CreditCardField = loadComponent('CreditCardField', context);\n      const props = {\n        ...this.data('schema'),\n      };\n\n      ReactDOM.render(\n        <CreditCardField\n          {...props}\n        />,\n        this[0]\n      );\n    },\n\n    onunmatch() {\n      ReactDOM.unmountComponentAtNode(this[0]);\n    }\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/legacy/entwine/CreditCardFieldEntwine.js","module.exports = Injector;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"Injector\"\n// module id = 0\n// module chunks = 0","module.exports = React;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"React\"\n// module id = 1\n// module chunks = 0","module.exports = FieldHolder;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"FieldHolder\"\n// module id = 2\n// module chunks = 0","module.exports = ReactDom;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ReactDom\"\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}